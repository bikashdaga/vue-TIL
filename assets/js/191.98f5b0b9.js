(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{748:function(s,t,a){"use strict";a.r(t);var e=a(21),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("ul",[a("li",[a("p",[s._v("자동 투자 봇 프로젝트 클론코딩 정리내용 중 부족한 부분이 있어서 보충함")])]),s._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://github.com/Parkjju/TIL/blob/master/Projects/investing_bot/Chapter4/database_on.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("210305 / 트레이딩 봇 클론코딩 - 데이터베이스 연동하기"),a("OutboundLink")],1)])]),s._v(" "),a("li",[a("p",[s._v("파이썬 코드에서 Database와 연결하기 위한 라이브러리 중 SQLAlchemy라는 라이브러리가 있다.")])]),s._v(" "),a("li",[a("p",[s._v("클래스를 사용하여 DB TABLE들을 표현하고 CRUD를 할 수 있도록 해줌")])])]),s._v(" "),a("h3",{attrs:{id:"sqlalchemy-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlalchemy-설치"}},[s._v("#")]),s._v(" SQLAlchemy 설치")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("pycharm에서 설치하였음 // 파이썬 패키지 매니저를 통해 설치 (pip)")])]),s._v(" "),a("li",[a("p",[s._v("SQLAlchemy 설치 후 해당 라이브러리의 pymysql을 import!")])])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("$ pip install sqlalchemy\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" pymysql\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql db 와의 호환을 위해 아래 함수 호출")]),s._v("\n$ pymysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("install_as_MySQLdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("pymysql이란? "),a("strong",[s._v("Python 전용 데이터베이스 커넥터를 뜻한다.")]),s._v(" Python 프로그램이 MYSQL 서버와 통신할 수 있게 만들어주는 라이브러리.")])]),s._v(" "),a("h3",{attrs:{id:"create-engine-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-engine-import"}},[s._v("#")]),s._v(" create_engine import")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("SQLAlchemy가 DB에 접근하려면, DB 접속 정보를 알아야함.")])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("이러한 접속 정보를 받아서 연결을 관리하는 객체가 Engine")])])])]),s._v(" "),a("ul",[a("li",[s._v("파이썬을 통한 mysql 접근을 하기 위해 진행하는 데이터베이스 설정은 다음과 같다.")])]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sqlalchemy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" create_engine\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" engine "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" create_engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql+mysqldb://"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" db_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" db_passwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@"')]),s._v("\n                                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" db_ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('":"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" db_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" db_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("Connecting String")])]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql+pymysql://&lt;username>:&lt;password>@&lt;host>/&lt;dbname>[?&lt;options>]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("db_id, db_password 등은 위의 클론 프로젝트 정리 내용에서 정의한 변수명이다.")])]),s._v(" "),a("h3",{attrs:{id:"collector-py-파일-실행-시-데이터-베이스의-연결-정보를-저장할-내용-만들기-name-main-기반"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#collector-py-파일-실행-시-데이터-베이스의-연결-정보를-저장할-내용-만들기-name-main-기반"}},[s._v("#")]),s._v(" collector.py 파일 실행 시 데이터 베이스의 연결 정보를 저장할 내용 만들기 "),a("strong",[s._v("name")]),s._v('="'),a("strong",[s._v("main")]),s._v('"기반')]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("db "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    db_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'database_name'")]),s._v("\n    db_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql id'")]),s._v("\n    db_ip "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 자신의 로컬컴퓨터")]),s._v("\n    db_password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql password'")]),s._v("\n    db_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3306'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"연동을-모두-마치고-기본적인-쿼리문을-실행해보기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#연동을-모두-마치고-기본적인-쿼리문을-실행해보기"}},[s._v("#")]),s._v(" 연동을 모두 마치고 기본적인 쿼리문을 실행해보기")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" engine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("execute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"select * from test1.class1;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fetchall"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("db연결시 create_engine 함수를 통해 생성한 engine 객체의 execute 메소드를 이용한다.")])]),s._v(" "),a("li",[a("p",[s._v("또한 fetchall 메소드를 통해 row들을 튜플 리스트로 받아온다.")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);